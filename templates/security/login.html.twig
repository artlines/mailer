{% extends "tmpl.html.twig" %}

{% block title %}Авторизация{% endblock %}

{% block main %}

<main class="container" id="auth">
  <div class="row">
    <div class="col s10 offset-s1 m8 offset-m2 l6 offset-l3">
      <div class="card card-auth">
        <div class="card-content">
          <span class="card-title">
            <strong class="grey-text text-darken-2">Авторизация</strong>
          </span>

          <form action="{{ path('login') }}" method="post">
            {% if error %}
              <div class="error-message">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}

            <div class="row">
              <div class="input-field col s12">
                <i class="material-icons prefix">email</i>
                <input id="email" type="text" name="_email" class="validate"
                pattern="[a-zA-Z'0-9._%+-]+@[a-zA-Z--0-9.-:]+\.[a-z]{2,4}$" value="{{ last_username }}">
                <label for="email">Эл. адрес: (xyz@zyx.com)*</label>
                <span class="helper-text" data-error="Неверный формат эл. адреса" data-success=""></span>
              </div>

              <input type="hidden" name="_target_path" value="/">
              <input type="hidden" name="_failure_path" value="/login">

              <div class="input-field col s12">
                <i class="material-icons prefix">https</i>
                <input id="password" type="password" name="_password" class="validate" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Пароль должен содержать латинские символы строчного и заглавного начертания, в кол-ве 8-ми и более">
                <label for="password">Пароль: (8 символов)*</label>
                <span class="helper-text" data-error="Неверный формат пароля" data-success=""></span>
              </div>

              <div class="input-field col s12 buttons">
                <button class="btn waves-effect waves-light col s12" type="submit" name="action">Войти
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}
